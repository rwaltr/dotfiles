{{- $theme := fromYaml (output "chezmoi" "execute-template" ( include  ".chezmoitemplates/theme" | trim )) }}
{{- if eq .theme "wal" }}
# Grab Colors from WAL
include ~/.cache/wal/colors-sway
{{- else }}
# Colors generated by Chezmoi
set $wallpaper {{ $theme.wallpaper }}
set $background {{ $theme.special.background }}
{{- end }}
{{- $bgSetting := "" }}
{{- if ne $theme.wallpaper "None" }}
{{- $bgSetting = cat ( joinPath .chezmoi.homeDir $theme.wallpaper) "fill" }}
{{- else}}
{{- $bgSetting = "$background solid_color" }}
{{- end}}

# Monitor Setup
# You can get the names of your outputs by running: swaymsg -t get_outputs
{{ if eq .is.battlestation true  -}}
# Left Monitor
set $leftmon "Dell Inc. DELL P2214H KW14V41N249B"
set $midmon "Goldstar Company Ltd LG ULTRAWIDE 208NTNHFM391"
set $rightmon "Dell Inc. DELL P2214H T0RN665G2R5S"
output $leftmon { 
  pos 0 0 
  transform 90
  mode 1920x1080@60Hz
	bg {{ $bgSetting }}
}
# Middle Monitor
output $midmon {
	pos 1080 {{ floor (mulf 1920 .25) }} 
	mode 3440x1440@158.962Hz
	#bg $wallpaper fill $background
  bg {{ $bgSetting }}
}
# Right Monitor
output $rightmon {
  pos {{ add 1080 3440 }} {{ floor (mulf 1920 .25) }} 
  mode 1920x1080@60Hz
  bg {{ $bgSetting }}
}
{{ else }}
output * bg {{ $bgSetting }}
# output * bg $wallpaper fill $background
{{ end -}}

{{ if eq .chezmoi.hostname "teletran1-work" -}}
# Detect Laptop Lid
  bindswitch lid:on output eDP-1 disable
  bindswitch lid:off output eDP-1 enable
{{ end -}}
