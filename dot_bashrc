# RWALTR Bash Config
# .bashrc

# Source global definitions
if [ -f /etc/bashrc ]; then
	. /etc/bashrc
fi

# Source modular Bash files
if [ -d $HOME/.config/bash ]; then
  for i in $(ls $HOME/.config/bash/*) ;
	do
	  source $i;
	done
fi
# Custom Local PATH

if [ -d ~/.bin/exec/ ]
	then
		PATH=$PATH:~/.bin/exec/
fi

# Hook into Tmux

if [ -z $TMUX ]; then
		tmux new; 
fi

# Source fzf
source /usr/share/fzf/shell/key-bindings.bash

#Shell Options
shopt -s autocd # change to named directory
shopt -s cdspell # autocorrects cd misspellings
shopt -s cmdhist # save multi-line commands in history as single line
shopt -s dotglob
shopt -s histappend # do not overwrite history
shopt -s expand_aliases # expand aliases
shopt -s checkwinsize # checks term size when bash regains control
bind "set completion-ignore-case on"
# Treat hyphens and underscores as equivalent
bind "set completion-map-case on"
# Display matches for ambiguous patterns at first tab press
bind "set show-all-if-ambiguous on"
# Immediately add a trailing slash when autocompleting symlinks to directories
bind "set mark-symlinked-directories on"

# This defines where cd looks for targets
# Add the directories you want to have fast access to, separated by colon
# Ex: CDPATH=".:~:~/projects" will look for targets in the current working directory, in home and in the ~/projects folder
CDPATH="."

# Custom bookmarks
shopt -s cdable_vars
# export dotfiles="$HOME/dotfiles"
# export projects="$HOME/projects"
# export documents="$HOME/Documents"
# export dropbox="$HOME/Dropbox"



# Custom Alias

# easy resource
alias resource="source ~/.bashrc"

#Vimwiki alias
alias vimwiki="vim -c VimwikiIndex"
alias vimdiary="vim -c VimwikiDiaryIndex"
alias vw=vimwiki
alias vd=vimdiary

# Easy Open
alias open="xdg-open"

# File listing
alias l="ls"
alias ls="ls --color"
alias ll="ls -lh"
alias la="ls -ah"
alias lla="ls -lah"

# Easy upward navigation
alias ..="cd .."
alias ...="cd ../../../"
alias ....="cd ../../../../"
alias .....="cd ../../../../"
alias cd..=".."

# Weather!
alias wttr="curl wttr.in"

#QOL
#Forgot a space
alias sudo!!="sudo !!"

#GPG helpers
# verify signature
alias gpg-check="gpg --keyserver-options auto-key-retrieve --verify"
# receive the key of a developer
alias gpg-retrieve="gpg --keyserver-options auto-key-retrieve --receive-keys"

# git
alias addup='git add -u'
alias addall='git add .'
alias branch='git branch'
alias checkout='git checkout'
alias clone='git clone'
alias commit='git commit -m'
alias fetch='git fetch'
alias pull='git pull origin'
alias push='git push origin'
alias status='git status'
alias tag='git tag'
alias newtag='git tag -a'

# IP colors
alias ip='ip -br -c'

# Services
#Termbin
alias tb='nc termbin.com 9999'
alias termbin=tb

# Custom Prompts 
if [ -x "$(command -v starship)" ]
then
	eval "$(starship init bash)"
fi



# Nvim
if [ -x "$(command -v nvim)" ] 
then
	alias vim=nvim
	alias vi=vim
	export EDITOR=nvim
else
	echo "Nvim not found, using vim"
	alias nvim=vim
	alias vi=vim
	export EDITOR=vim
fi

# lsd
if [ -x "$(command -v lsd)" ]
then
	alias ls=lsd
else
	echo "Using default ls"
fi
# Custom Envioment Vars

# Chezmoi

if [ -x "$(command -v chezmoi)" ]
then
	alias rconfig='rclone config && chezmoi add --encrypt $HOME/.config/rclone/rclone.conf'
fi


# Custom Functions
fzopen (){
fd -t f -H -I | fzf -m --preview="xdg-mime query default {}" | xargs -ro -d "\n" xdg-open 2>&-
}




