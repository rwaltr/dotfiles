# vi: set ft=yaml
{{- $email := "rwalt@pm.me" -}}
{{/* boolean feature tags */}}
{{- $battlestation := false -}}{{/* Special workstation... */}}
{{- $headless := false -}}{{/* true if this machine does not have a screen and keyboard */}}
{{- $personal := false -}}{{/* true if this machine should have personal secrets from BitWarden */}}


{{- /* detect GitHub codespaces, VSCode remote containers, Docker containers, Multipass VMs, and Vagrant boxes */ -}}
{{- if or (env "CODESPACES") (env "REMOTE_CONTAINERS_IPC") (eq .chezmoi.username "vagrant" "vscode") -}}
{{-   $headless = true -}}
{{- end -}}


{{- $hostname := .chezmoi.hostname -}}
{{-   if eq $hostname "monolith" -}}
{{-     $headless = false -}}
{{-     $personal = true -}}
{{-     $battlestation = true -}}
{{-   else if stdinIsATTY -}}
{{-     if hasKey . "headless" -}}
{{-       $headless = .headless -}}
{{-     else -}}
{{-       $headless = promptBool "headless" -}}
{{-     end -}}

{{-     if hasKey . ".is.personal" -}}
{{-       $personal = .is.personal -}}
{{-     else -}}
{{-       $personal = promptBool "personal" -}}
{{-     end -}}

{{-       $battlestation = .battlestation -}}
{{-     else -}}
{{-       $battlestation = promptBool "battlestation" -}}
{{-     end -}}

{{-   else -}}
{{-     $headless = true -}}
{{-   end -}}

{{- $osid := .chezmoi.os -}}
{{- $osIDLike := ""}}
{{- if hasKey .chezmoi.osRelease "id" -}}
{{-   $osid = printf "%s-%s" .chezmoi.os .chezmoi.osRelease.id -}}
{{-   $osIDLike = .chezmoi.osRelease.id }}
{{- end -}}

{{- if ne $personal true -}}
{{- $email = promptString "Email" -}}
{{- end -}}

{{- $editor := "" -}}
{{-   if lookPath "nvim" -}}
{{-     $editor = "nvim" -}}
{{-   else if lookPath "vim" -}}
{{-     $editor = "vim" -}}
{{-   else if lookPath "vi" -}}
{{-     $editor = "vi" -}}
{{-   else if lookPath "nano" -}}
{{-     $editor = "nano" -}}
{{-   end -}}

{{- $visual := "" -}}
{{-   if lookPath "neovide" -}}
{{-     $visual = "neovide" -}}
{{-   else if lookPath "nvim-qt" -}}
{{-     $visual = "nvim-qt" -}}
{{-   else -}}
{{-     $visual = $editor -}}
{{-   end -}}

{{ $terminal := "" -}}
{{-   if lookPath "foot" -}}
{{-     $terminal = "foot" -}}
{{-   else if lookPath "alacritty" -}}
{{-     $terminal = "alacritty" -}}
{{-   else -}}
{{-     $terminal = "gnome-terminal" -}}
{{- end -}}
sourceDir: {{ .chezmoi.sourceDir | quote }}

data:
  name: "Ryan Walter"
  email: {{ $email | quote }}
  is:
    personal: {{ $personal }}
    work: false
    battlestation: {{ $battlestation }}
    headless: {{ $headless }}
  osid: {{ $osid | quote }}
  osidlike: {{ $osIDLike | quote }}
  theme: "rwaltr"
  programs:
    terminal: {{ $terminal | quote }}
    editor: {{ $editor | quote }}
    visual: {{ $visual | quote }}
    browser: "firefox"
  font:
    gui:
      name: "Lekton Nerd Font"
      size: 12.0
    term:
      name: "Monoid Nerd Font"
      size: 11.0
    title:
      name: "Lekton Nerd Font"
      size: 16.0
  mpd:
    enabled: false
    server: "localhost"
    port: 6600
    timeout: 15
encryption = "age"
gpg:
  recipient: ""
age:
  recipient = "age189npag0lz2hl425ldurk8czrpyv69tg4cgqgzl7wjh60w39sysesazu4u6"
  identity = "~/.config/sops/keys.txt"
