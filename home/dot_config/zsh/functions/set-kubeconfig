# sets kubeconfig env with .kube/clusters
set-kubeconfig() {
    # Init var
    local FILES=""
    # default kubeconfig
    if [[ -f "$HOME/.kube/config" ]]; then
        FILES="$HOME/.kube/config"
    fi
    # create clusters directory if its not created
    local CLUSTERS_DIR="$HOME/.kube/clusters"
    mkdir -p "$CLUSTERS_DIR"
    
    # Disable nomatch option temporarily to avoid errors when no files match
    setopt local_options null_glob
    for cluster in "$CLUSTERS_DIR"/*.yml "$CLUSTERS_DIR"/*.yaml; do
        [[ -f "$cluster" ]] && FILES="$cluster:$FILES"
    done
    FILES="${FILES%:}"
    export KUBECONFIG="$FILES"
}
